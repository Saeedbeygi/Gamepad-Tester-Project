<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamepad Tester</title>
    <style>
        body {
            background-color: #121212;
            color: #fff;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .controller {
            width: 400px;
        }
        .button {
            fill: #fff;
            stroke: #000;
            stroke-width: 2;
            cursor: pointer;
        }
        .button.active {
            fill: #ff0000;
        }
    </style>
</head>
<body>
    <div>
        <h1>Gamepad Tester</h1>
    </div>
    <div id="controller-details"></div>
    <div id="player-info">
        <h2>PLAYER 1</h2>
        <p id="gamepad-status">No gamepad detected</p>
    </div>

    <svg class="controller" viewBox="0 0 500 300" xmlns="http://www.w3.org/2000/svg">
        <!-- Left Handle -->
        <path d="M100 150 C50 100, 50 200, 100 250 L150 250 L150 50 L100 50 Z" fill="#ccc" />
        <!-- Right Handle -->
        <path d="M400 150 C450 100, 450 200, 400 250 L350 250 L350 50 L400 50 Z" fill="#ccc" />
        
        <!-- Buttons -->
        <circle id="button-cross" class="button" cx="400" cy="150" r="15" />
        <circle id="button-circle" class="button" cx="430" cy="120" r="15" />
        <circle id="button-square" class="button" cx="370" cy="120" r="15" />
        <circle id="button-triangle" class="button" cx="400" cy="90" r="15" />

        <!-- Left Stick -->
        <circle id="left-stick" class="button" cx="150" cy="150" r="25" />

        <!-- Right Stick -->
        <circle id="right-stick" class="button" cx="300" cy="200" r="25" />
    </svg>

    <script>
        window.addEventListener('gamepadconnected', (event) => {
            console.log('Gamepad connected:', event.gamepad);
            document.getElementById('gamepad-status').textContent = 'Gamepad connected';
            requestAnimationFrame(updateGamepad);
        });

        function updateGamepad() {
            const gamepads = navigator.getGamepads();
            const gp = gamepads[0];
            if (!gp) {
                document.getElementById('gamepad-status').textContent = 'No gamepad detected';
                return;
            }

            // Buttons
            gp.buttons.forEach((button, index) => {
                const element = document.querySelector(`#button-${getButtonName(index)}`);
                if (element) {
                    if (button.pressed) {
                        element.classList.add('active');
                    } else {
                        element.classList.remove('active');
                    }
                }
            });

            // Analog sticks
            const leftStick = document.querySelector('#left-stick');
            const rightStick = document.querySelector('#right-stick');
            const leftStickX = gp.axes[0]; // Left stick horizontal
            const leftStickY = gp.axes[1]; // Left stick vertical
            const rightStickX = gp.axes[2]; // Right stick horizontal
            const rightStickY = gp.axes[3]; // Right stick vertical

            // Move the sticks based on the axes
            leftStick.setAttribute('cx', 150 + leftStickX * 25);
            leftStick.setAttribute('cy', 150 + leftStickY * 25);
            rightStick.setAttribute('cx', 300 + rightStickX * 25);
            rightStick.setAttribute('cy', 200 + rightStickY * 25);

            requestAnimationFrame(updateGamepad);
        }

        function getButtonName(index) {
            const buttonMap = {
                0: 'cross',
                1: 'circle',
                2: 'square',
                3: 'triangle'
            };
            return buttonMap[index] || '';
        }
    </script>
</body>
</html>

