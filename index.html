<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamepad Tester</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background-color: #121212;
            color: #fff;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .controller {
            width: 400px;
        }
        .button {
            fill: #fff;
            stroke: #000;
            stroke-width: 2;
            cursor: pointer;
        }
        .button.active {
            fill: #ff0000;
        }
    </style>
</head>
<body>
  <div>  <h1>Gamepad Tester</h1></div>
    <div id="controller-details"></div>
    <div id="player-info">
        <h2>PLAYER 1</h2>
        <p id="gamepad-status">No gamepad detected</p>
    </div>

    <svg class="controller" viewBox="0 0 500 300" xmlns="http://www.w3.org/2000/svg">
        <!-- Left Handle -->
        <path d="M100 150 C50 100, 50 200, 100 250 L150 250 L150 50 L100 50 Z" fill="#ccc" />
        <!-- Right Handle -->
        <path d="M400 150 C450 100, 450 200, 400 250 L350 250 L350 50 L400 50 Z" fill="#ccc" />
        
        <!-- Buttons -->
        <circle id="button-cross" class="button" cx="400" cy="150" r="15" />
        <circle id="button-circle" class="button" cx="430" cy="120" r="15" />
        <circle id="button-square" class="button" cx="370" cy="120" r="15" />
        <circle id="button-triangle" class="button" cx="400" cy="90" r="15" />

        <!-- Left Stick -->
        <circle id="left-stick" class="button" cx="150" cy="150" r="25" />

        <!-- Right Stick -->
        <circle id="right-stick" class="button" cx="300" cy="200" r="25" />
    </svg>

    
    <svg style="width: 100%; height: 100%; position: absolute; z-index: 1;"     xmlns="http://www.w3.org/2000/svg"  >
    <g transform="translate(78.5 78.5) scale(0.95, 0.95)">
        
        <circle cx="0" cy="0" r="78.5" fill="none" stroke="hsla(210,90%,20%,0.2)" stroke-width="1">

        </circle><line x1="0" y1="-78.5" x2="0" y2="78.5" stroke="hsla(210,90%,20%,0.2)" stroke-width="1">
            
        </line><line x1="-78.5" y1="0" x2="78.5" y2="0" stroke="hsla(210,90%,20%,0.2)" stroke-width="1">

        </line><line x1="0" y1="0" x2="0.307847797870636" y2="-0.9235293567180634" stroke="hsl(210,90%,20%)" stroke-width="1">

</line><circle cx="0.307847797870636" cy="-0.9235293567180634" r="4" fill="hsl(210,90%,20%)"></circle></g>
</svg>

<div style="margin-left: -10px;">
<div class="stick">

<svg style="width: 100%; height: 100%; position: absolute; z-index: 1;"  >
<g transform="translate(78.5 78.5) scale(0.95, 0.95)">
<circle  id="left-stickb" cx="0" cy="0" r="78.5" fill="none" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></circle>

<line x1="0" y1="-78.5" x2="0" y2="78.5" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></line>
<line x1="-78.5" y1="0" x2="78.5" y2="0" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></line>
<line x1="0" y1="0" x2="0.307847797870636" y2="-1.5392155945301056" stroke="hsl(210,90%,20%)" stroke-width="1"></line>
<circle cx="0.307847797870636" cy="-1.5392155945301056" r="4" fill="hsl(210,90%,20%)"></circle>
</g>

</svg>

</div>
  <div class="stick">
  <svg style="width: 100%; height: 100%; position: absolute; z-index: 1;">
  <g transform="translate(78.5 78.5) scale(0.95, 0.95)">
  <circle id="right-sticka"  cx="0" cy="0" r="78.5" fill="none" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></circle>
  <line x1="0" y1="-78.5" x2="0" y2="78.5" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></line>
  <line x1="-78.5" y1="0" x2="78.5" y2="0" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></line>
  <line x1="0" y1="0" x2="-0.3078431189060211" y2="0.307847797870636" stroke="hsl(210,90%,20%)" stroke-width="1">
 </line>
 <circle cx="-0.3078431189060211" cy="0.307847797870636" r="4" fill="hsl(210,90%,20%)"></circle>
  </g>
  </svg>
  </div>
</div>


 
</body>
</html>

    
  </div>
      </div>
              </div>
</div>

    <script>
        window.addEventListener('gamepadconnected', (event) => {
            console.log('Gamepad connected:', event.gamepad);
            requestAnimationFrame(updateGamepad);
        });

        function updateGamepad() {
            const gamepads = navigator.getGamepads();
            const gp = gamepads[0];
            if (!gp) return;

            // Buttons
            gp.buttons.forEach((button, index) => {
                const element = document.querySelector(`#button-${getButtonName(index)}`);
                if (element) {
                    if (button.pressed) {
                        element.classList.add('active');
                    } else {
                        element.classList.remove('active');
                    }
                }
            });

            // Analog sticks
            const leftStick = document.querySelector('#left-stick');
            const rightStick = document.querySelector('#right-stick');
            leftStick.setAttribute('cx', 150 + gp.axes[0] * 25);
            leftStick.setAttribute('cy', 150 + gp.axes[1] * 25);
            rightStick.setAttribute('cx', 300 + gp.axes[2] * 25);
            rightStick.setAttribute('cy', 200 + gp.axes[3] * 25);

            requestAnimationFrame(updateGamepad);

             // Analog sticks circle
            const leftStick = document.querySelector('#left-stickb');
            const rightStick = document.querySelector('#right-sticka');
            leftStickb.setAttribute('cx', 0 + gp.axes[0] * 78.5);
            leftStickb.setAttribute('cy', 0 + gp.axes[1] * 78.5);
            rightSticka.setAttribute('cx', 0 + gp.axes[2] * 78.5);
            rightSticka.setAttribute('cy', 0 + gp.axes[3] * 78.5);

            requestAnimationFrame(updateGamepad);


            
        }

        function getButtonName(index) {
            const buttonMap = {
                0: 'cross',
                1: 'circle',
                2: 'square',
                3: 'triangle'
            };
            return buttonMap[index] || '';
        }
    </script>
    
    
    <script src="script.js"></script>
</body>
</html>
