<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PS5 Controller Test</title>
</head>
<body>
  <div style="display: flex; gap: 10px; margin-left: -10px;">
    <div class="css-1tbapvf">
      <svg style="width: 100%; height: 100%; position: relative; z-index: 1;">
        <g transform="translate(78.5 78.5) scale(0.95, 0.95)">
          <circle cx="0" cy="0" r="78.5" fill="none" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></circle>
          <line x1="0" y1="-78.5" x2="0" y2="78.5" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></line>
          <line x1="-78.5" y1="0" x2="78.5" y2="0" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></line>
          <circle cx="0" cy="0" r="4" fill="hsl(210,90%,20%)" id="left-stick"></circle>
        </g>
      </svg>
    </div>
    <div class="css-1tbapvf">
      <svg style="width: 100%; height: 100%; position: relative; z-index: 1;">
        <g transform="translate(78.5 78.5) scale(0.95, 0.95)">
          <circle cx="0" cy="0" r="78.5" fill="none" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></circle>
          <line x1="0" y1="-78.5" x2="0" y2="78.5" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></line>
          <line x1="-78.5" y1="0" x2="78.5" y2="0" stroke="hsla(210,90%,20%,0.2)" stroke-width="1"></line>
          <circle cx="0" cy="0" r="4" fill="hsl(210,90%,20%)" id="right-stick"></circle>
        </g>
      </svg>
    </div>
  </div>

  <script>
    let gamepadIndex = null;

    window.addEventListener("gamepadconnected", (event) => {
      gamepadIndex = event.gamepad.index;
      console.log("Gamepad connected:", event.gamepad.id);
      updateSticks();
    });

    window.addEventListener("gamepaddisconnected", () => {
      gamepadIndex = null;
      console.log("Gamepad disconnected");
    });

    function updateSticks() {
      if (gamepadIndex === null) return;

      const gamepads = navigator.getGamepads();
      const gp = gamepads[gamepadIndex];

      if (gp) {
        // Left Stick
        const leftStickX = gp.axes[0];
        const leftStickY = gp.axes[1];
        const leftStickCircle = document.getElementById("left-stick");
        leftStickCircle.setAttribute("cx", leftStickX * 78.5);
        leftStickCircle.setAttribute("cy", leftStickY * 78.5);

        // Right Stick
        const rightStickX = gp.axes[2];
        const rightStickY = gp.axes[3];
        const rightStickCircle = document.getElementById("right-stick");
        rightStickCircle.setAttribute("cx", rightStickX * 78.5);
        rightStickCircle.setAttribute("cy", rightStickY * 78.5);
      }

      requestAnimationFrame(updateSticks);
    }
  </script>
</body>
</html>


